{"version":3,"file":"player.js","sources":["store/module/player.js"],"sourcesContent":["import { defineStore } from 'pinia' \r\nimport { fetchSongDetail, fetchSongLyric } from '@/service/module/plyaer'\nimport { formatLyrics } from '@/utils/formatView'\nconst usePlayer = defineStore('player', {\r\n\tstate: () => {\r\n\t\treturn {\r\n\t\t\tisFirstPlay: true,\r\n\t\t\tsongDetail: {},\r\n\t\t\tsongList: [],\r\n\t\t\tsongIndex: 0,\r\n\t\t\tlyrics: \"\",\r\n\t\t\tlyricsList: {},\r\n\t\t\tcurrentIndex: -1,\r\n\t\t\tcurrentLyrics: \"\",\r\n\t\t\tcurrentTime: 0,\r\n\t\t\tdurationTime: 0,\r\n\t\t\tsliderLength: 0,\r\n\t\t\tscrollToTop: 0,\r\n\t\t\tisSlide: false,\r\n\t\t\tisPlaying: true,\r\n\t\t\tcurrentOrder: 0,\r\n\t\t\tcurrentOrderName: \"order\",\r\n\t\t}\r\n\t},\r\n\tactions: {\r\n\t\tgetSongs(id) {\r\n\t\t\treturn new Promise(async (resolve, reject) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 获取歌曲详情\r\n\t\t\t\t\tlet res = await fetchSongDetail(id)\r\n\t\t\t\t\tthis.songDetail = res.data.songs[0]\r\n\t\t\t\t\tthis.durationTime = res.data.songs[0].dt\r\n\t\t\t\t\t// 获取歌词\r\n\t\t\t\t\tres = await fetchSongLyric(id)\r\n\t\t\t\t\tthis.lyrics = res.data.lrc.lyric\r\n\t\t\t\t\tthis.lyricsList = formatLyrics(this.lyrics)\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t} catch(err) {\r\n\t\t\t\t\treject(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})\r\nexport default usePlayer"],"names":["defineStore","fetchSongDetail","fetchSongLyric","formatLyrics"],"mappings":";;;;AAGK,MAAC,YAAYA,cAAW,YAAC,UAAU;AAAA,EACvC,OAAO,MAAM;AACZ,WAAO;AAAA,MACN,aAAa;AAAA,MACb,YAAY,CAAE;AAAA,MACd,UAAU,CAAE;AAAA,MACZ,WAAW;AAAA,MACX,QAAQ;AAAA,MACR,YAAY,CAAE;AAAA,MACd,cAAc;AAAA,MACd,eAAe;AAAA,MACf,aAAa;AAAA,MACb,cAAc;AAAA,MACd,cAAc;AAAA,MACd,aAAa;AAAA,MACb,SAAS;AAAA,MACT,WAAW;AAAA,MACX,cAAc;AAAA,MACd,kBAAkB;AAAA,IAClB;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACR,SAAS,IAAI;AACZ,aAAO,IAAI,QAAQ,OAAO,SAAS,WAAW;AAC7C,YAAI;AAEH,cAAI,MAAM,MAAMC,sBAAe,gBAAC,EAAE;AAClC,eAAK,aAAa,IAAI,KAAK,MAAM,CAAC;AAClC,eAAK,eAAe,IAAI,KAAK,MAAM,CAAC,EAAE;AAEtC,gBAAM,MAAMC,sBAAc,eAAC,EAAE;AAC7B,eAAK,SAAS,IAAI,KAAK,IAAI;AAC3B,eAAK,aAAaC,8BAAa,KAAK,MAAM;AAC1C,kBAAS;AAAA,QACT,SAAO,KAAK;AACZ,iBAAO,GAAG;AAAA,QACV;AAAA,MACL,CAAI;AAAA,IACD;AAAA,EACD;AACF,CAAC;;"}